<!DOCTYPE HTML>  
<html>  
<head>
<title>H5STREAM TOUR VIDEO</title>
<script src="js/jquery-3.1.1.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/adapter.js"></script>
<script src="js/platform.js"></script>
<script src="js/h5splayer.js"></script>
<script src="js/h5splayerhelper.js"></script>

<link rel = "stylesheet" type = "text/css" href = "css/h5splayer.css" />

</head>

<body> 
<div class="row">
<div class="h5videodiv" id="h5videodiv1">

</div>

<div class="h5videodiv" id="h5videodiv2">

</div>
</div>
<div class="row">
<div class="h5videodiv" id="h5videodiv3">
</div>


<div class="h5videodiv" id="h5videodiv4">

</div>
</div>
<div class="row">
	<button type="button" onclick="Start()">Start</button>
	<button type="button" onclick="Stop()">Stop</button>
</div>
</body>

<script>

var conf1 = {
	videoid:'h5sVideo1',
	protocol: window.location.protocol, //'http:' or 'https:'
	host: window.location.host, //'localhost:8080'
	rootpath:'/', // '/' or window.location.pathname
	token:'token1',
	hlsver:'v1', //v1 is for ts, v2 is for fmp4
	session:'c1782caf-b670-42d8-ba90-2244d0b0ee83' //session got from login
};

var conf2 = {
	videoid:'h5sVideo2',
	//videodom: h5svideodom2,
	protocol: window.location.protocol, //'http:' or 'https:'
	host: window.location.host, //'localhost:8080'
	rootpath:'/', // '/' or window.location.pathname
	token:'token1',
	hlsver:'v1', //v1 is for ts, v2 is for fmp4
	session:'c1782caf-b670-42d8-ba90-2244d0b0ee83' //session got from login
};

//If there has no videoid, the videodom can be the videodom. if there has videoid, just use the videoid
var conf3 = {
	videoid:'h5sVideo3',
	protocol: window.location.protocol, //'http:' or 'https:'
	host: window.location.host, //'localhost:8080'
	rootpath:'/', // '/' or window.location.pathname
	token:'token2',
	hlsver:'v1', //v1 is for ts, v2 is for fmp4
	session:'c1782caf-b670-42d8-ba90-2244d0b0ee83' //session got from login
};
var conf4 = {
	videoid:'h5sVideo4',
	protocol: window.location.protocol, //'http:' or 'https:'
	host: window.location.host, //'localhost:8080'
	rootpath:'/', // '/' or window.location.pathname
	token:'token2',
	hlsver:'v1', //v1 is for ts, v2 is for fmp4
	session:'c1782caf-b670-42d8-ba90-2244d0b0ee83' //session got from login
};
var v1;
var v2;
var v3;
var v4;

var tourTimerId;
var i = 0;

function UpdateVideoTag()
{
	$('#h5videodiv1').empty();
	$('#h5videodiv1').html('<video class="h5video" id="h5sVideo1"  autoplay webkit-playsinline playsinline></video>');
	
	$('#h5videodiv2').empty();
	$('#h5videodiv2').html('<video class="h5video" id="h5sVideo2"  autoplay webkit-playsinline playsinline></video>');

	$('#h5videodiv3').empty();
	$('#h5videodiv3').html('<video class="h5video" id="h5sVideo3"  autoplay webkit-playsinline playsinline></video>');

	$('#h5videodiv4').empty();
	$('#h5videodiv4').html('<video class="h5video" id="h5sVideo4"  autoplay webkit-playsinline playsinline></video>');	
}

function UpdateToken()
{	
	var token = 'token1';
	console.log('Update token ... ', i, i%4);
	if (i%4 == 0)
	{
		token = 'token1';
	}else if (i%4 == 1)
	{
		token = 'token2';
	}else if (i%4 == 2)
	{
		token = 'token3';
	}else if (i%4 == 3)
	{
		token = 'token4';
	}
	console.log('Update token ... ', i, token);
	conf1.token = token;
	conf2.token = token;
	conf3.token = token;
	conf4.token = token;
	
	i = i + 1;
}

var tourTimer = function()	
{	
	UpdateToken();
	console.log("Stop all...");
	v1.disconnect();
	v2.disconnect();
	v3.disconnect();
	v4.disconnect();
	
	delete v1;
	delete v2;
	delete v3;
	delete v4;
	
	//if don't need create video tag, remove below line
	//UpdateVideoTag();
	$('#h5sVideo1').get(0).load();
	$('#h5sVideo2').get(0).load();
	$('#h5sVideo3').get(0).load();
	$('#h5sVideo4').get(0).load();
	
	
	console.log("Start all...");
	v1 = new H5sPlayerWS(conf1);
	v2 = new H5sPlayerWS(conf2);
	v3 = new H5sPlayerWS(conf3);
	v4 = new H5sPlayerWS(conf4);
	v1.connect();
	v2.connect();
	v3.connect();
	v4.connect();
}

UpdateVideoTag();
function Start()
{
	UpdateToken();
	v1 = new H5sPlayerWS(conf1);
	v2 = new H5sPlayerWS(conf2);
	v3 = new H5sPlayerWS(conf3);
	v4 = new H5sPlayerWS(conf4);
	v1.connect();
	v2.connect();
	v3.connect();
	v4.connect();
	
	tourTimerId = setInterval(tourTimer, 10000);
}

function Stop()
{
	clearInterval(tourTimerId);
	
	v1.disconnect();
	v2.disconnect();
	v3.disconnect();
	v4.disconnect();
	
	delete v1;
	delete v2;
	delete v3;
	delete v4;
	
	UpdateVideoTag();
}


</script>

</html> 